'use strict';

angular.module('archiveApp')
  .controller('ListController', function ($scope, Archive, $stateParams, _) {

    var fullSet;

    Archive.getList($stateParams.collection)
    .then(function(data) {
      fullSet = data.response.docs;

      var years = _.uniq(_.map(_.pluck(fullSet, 'date'), function(item) {
        return parseInt(item.slice(0, 4), 10);
      }), true);
      console.log(years);

      $scope.shows = fullSet;
      $scope.years = years;
      $scope.year = years.slice(-1)[0];
    });


  });
